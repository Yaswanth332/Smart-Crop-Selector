{% extends 'recommendation/base.html' %}
{% load static %}
{% block title %}Home | AgriSmart{% endblock %}

{% block content %}
<!-- Hero Section with Parallax Effect -->
<section class="hero-section position-relative overflow-hidden">
  <div class="hero-overlay d-flex align-items-center">
    <div class="container text-center py-5 my-5" data-aos="zoom-in">
      <div class="hero-content mx-auto">
        <div class="hero-icon animate__animated animate__pulse animate__infinite animate__slow mb-4">
          <img src="{% static 'images/' %}" alt="Wheat Icon" width="80" height="80">
        </div>
        <h1 class="display-3 fw-bold mb-4">Smart Farming Starts Here</h1>
        <p class="lead fs-4 mb-5">
          AI-powered crop recommendations tailored to your land, soil, and climate conditions. 
          Maximize your harvest with data-driven insights.
        </p>
        <div class="d-flex flex-wrap justify-content-center gap-3">
          {% if user.is_authenticated %}
            <a href="{% url 'recommend' %}" class="btn btn-primary btn-lg px-4 py-3 shadow">
              <i class="fas fa-seedling me-2"></i> Get Recommendations
            </a>
            <a href="{% url 'past_recommendations' %}" class="btn btn-primary btn-lg px-4 py-3 shadow">
              <i class="fas fa-history me-2"></i> My Farm Log
            </a>
          {% else %}
            <a href="{% url 'login' %}" class="btn btn-primary btn-lg px-4 py-3 shadow">
              <i class="fas fa-sign-in-alt me-2"></i> Sign In
            </a>
            <a href="{% url 'register' %}" class="btn btn-success btn-lg px-4 py-3 shadow">
              <i class="fas fa-user-plus me-2"></i> Register
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <div class="hero-particles"></div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">Why Farmers Choose AgriSmart</h2>
      <div class="divider mx-auto"></div>
      <p class="lead text-muted mx-auto" style="max-width: 700px;">
        Our platform combines agricultural expertise with cutting-edge technology to help you make the best decisions for your farm.
      </p>
    </div>

    <div class="row g-4">
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="feature-card h-100">
          <div class="feature-icon bg-primary bg-opacity-10 text-primary">
            <i class="fas fa-robot fa-2x"></i>
          </div>
          <h3 class="h4 mt-4">AI-Powered Insights</h3>
          <p class="text-muted">
            Our advanced algorithms analyze soil composition, weather patterns, and market trends to recommend optimal crops.
          </p>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="feature-card h-100">
          <div class="feature-icon bg-success bg-opacity-10 text-success">
            <i class="fas fa-database fa-2x"></i>
          </div>
          <h3 class="h4 mt-4">Comprehensive Database</h3>
          <p class="text-muted">
            Access information on 150+ crops including growth cycles, soil requirements, and profitability metrics.
          </p>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
        <div class="feature-card h-100">
          <div class="feature-icon bg-warning bg-opacity-10 text-warning">
            <i class="fas fa-chart-line fa-2x"></i>
          </div>
          <h3 class="h4 mt-4">Performance Tracking</h3>
          <p class="text-muted">
            Monitor your farm's progress over time with detailed analytics and historical recommendations.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- How It Works Section -->
<section class="py-5">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">How AgriSmart Works</h2>
      <div class="divider mx-auto"></div>
    </div>

    <div class="row align-items-center">
      <div class="col-lg-6" data-aos="fade-right">
        <div class="how-it-works-img position-relative">
          <img src="{% static 'images/farmer-tablet.jpg' %}" alt="Farmer using tablet" class="img-fluid rounded-4 shadow">
          <div class="position-absolute top-0 start-0 w-100 h-100 bg-primary bg-opacity-10 rounded-4"></div>
        </div>
      </div>
      <div class="col-lg-6 mt-4 mt-lg-0" data-aos="fade-left">
        <div class="steps">
          <div class="step mb-4">
            <div class="step-number">1</div>
            <div class="step-content">
              <h4 class="h5">Enter Your Farm Details</h4>
              <p class="text-muted mb-0">
                Provide information about your soil type, location, farm size, and previous crops.
              </p>
            </div>
          </div>
          
          <div class="step mb-4">
            <div class="step-number">2</div>
            <div class="step-content">
              <h4 class="h5">Get Personalized Recommendations</h4>
              <p class="text-muted mb-0">
                Our system analyzes your data and suggests the most suitable crops for optimal yield.
              </p>
            </div>
          </div>
          
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h4 class="h5">Implement & Track Results</h4>
              <p class="text-muted mb-0">
                Plant your selected crops and monitor their performance through our tracking tools.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Stats Section (for logged in users) -->
{% if user.is_authenticated %}
<section class="py-5 bg-primary bg-opacity-10">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">Your Farming Journey</h2>
      <div class="divider mx-auto"></div>
    </div>

    <div class="row g-4">
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="stat-card text-center py-4">
          <div class="stat-number text-primary">{{ user.cropquery_set.count }}</div>
          <h3 class="h5">Total Queries</h3>
          <p class="text-muted mb-0">Recommendations requested</p>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="stat-card text-center py-4">
          <div class="stat-number text-success">150+</div>
          <h3 class="h5">Crops Available</h3>
          <p class="text-muted mb-0">In our database</p>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
        <div class="stat-card text-center py-4">
          <div class="stat-number text-warning">
            {% if user.cropquery_set.exists %}
              {{ user.cropquery_set.first.created_at|timesince }}
            {% else %}
              New
            {% endif %}
          </div>
          <h3 class="h5">
            {% if user.cropquery_set.exists %}
              Since Last Query
            {% else %}
              Farmer
            {% endif %}
          </h3>
          <p class="text-muted mb-0">Time with AgriSmart</p>
        </div>
      </div>
    </div>

    <div class="text-center mt-5" data-aos="fade-up">
      <a href="{% url 'recommend' %}" class="btn btn-primary btn-lg px-4 py-3 me-3 shadow">
        <i class="fas fa-seedling me-2"></i> New Recommendation
      </a>
      <a href="{% url 'past_recommendations' %}" class="btn btn-outline-primary btn-lg px-4 py-3 shadow">
        <i class="fas fa-history me-2"></i> View History
      </a>
    </div>
  </div>
</section>
{% endif %}

<!-- Testimonials Section -->
<section class="py-5 bg-light">
  <div class="container">
    <div class="text-center mb-5" data-aos="fade-up">
      <h2 class="display-5 fw-bold mb-3">What Farmers Say</h2>
      <div class="divider mx-auto"></div>
    </div>

    <div class="row g-4">
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
        <div class="testimonial-card h-100">
          <div class="testimonial-content">
            <div class="quote-icon text-primary">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="mb-4">
              AgriSmart helped me increase my yield by 30% in just one season. The crop recommendations were spot on!
            </p>
            <div class="testimonial-author">
              <img src="{% static 'images/farmer1.jpg' %}" alt="Rajesh Kumar" class="rounded-circle" width="60" height="60">
              <div class="ms-3">
                <h5 class="mb-1">Rajesh Kumar</h5>
                <p class="text-muted mb-0">Wheat Farmer, Punjab</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
        <div class="testimonial-card h-100">
          <div class="testimonial-content">
            <div class="quote-icon text-success">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="mb-4">
              The soil analysis feature saved me thousands in unnecessary fertilizers. Highly recommended for all farmers.
            </p>
            <div class="testimonial-author">
              <img src="{% static 'images/farmer2.jpg' %}" alt="Priya Patel" class="rounded-circle" width="60" height="60">
              <div class="ms-3">
                <h5 class="mb-1">Priya Patel</h5>
                <p class="text-muted mb-0">Organic Farmer, Maharashtra</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
        <div class="testimonial-card h-100">
          <div class="testimonial-content">
            <div class="quote-icon text-warning">
              <i class="fas fa-quote-left"></i>
            </div>
            <p class="mb-4">
              As a new farmer, the detailed crop information and planting guides have been invaluable to my success.
            </p>
            <div class="testimonial-author">
              <img src="{% static 'images/farmer3.jpg' %}" alt="Amit Singh" class="rounded-circle" width="60" height="60">
              <div class="ms-3">
                <h5 class="mb-1">Amit Singh</h5>
                <p class="text-muted mb-0">First-Gen Farmer, Uttar Pradesh</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<style>
  /* Hero Section */
  .hero-section {
   background: linear-gradient(rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2)), 
                        url("{% static 'images/farm-bg.jpg' %}") no-repeat center center fixed;
    background-size: cover;
    background-attachment: fixed;
    background-size: cover;
    min-height: 90vh;
    display: flex;
    align-items: center;
    position: relative;
    overflow: hidden;
  }
  
  .hero-overlay {
    position: relative;
    z-index: 2;
    width: 100%;
  }
  
  .hero-content {
    max-width: 800px;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1rem;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }
  
  [data-bs-theme="dark"] .hero-content {
    background: rgba(26, 62, 26, 0.9);
  }
  
  .hero-icon {
    animation: float 6s ease-in-out infinite;
  }
  
  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0px); }
  }
  
  /* Feature Cards */
  .feature-card {
    background: white;
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    border: 1px solid rgba(0, 0, 0, 0.05);
  }
  
  [data-bs-theme="dark"] .feature-card {
    background: rgba(33, 37, 41, 0.8);
    border-color: rgba(255, 255, 255, 0.1);
  }
  
  .feature-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
  }
  
  .feature-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
  }
  
  /* Steps */
  .steps {
    position: relative;
  }
  
  .step {
    position: relative;
    padding-left: 80px;
  }
  
  .step-number {
    position: absolute;
    left: 0;
    top: 0;
    width: 60px;
    height: 60px;
    background: var(--primary-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
  }
  
  /* Stats */
  .stat-card {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  }
  
  [data-bs-theme="dark"] .stat-card {
    background: rgba(33, 37, 41, 0.8);
  }
  
  .stat-number {
    font-size: 3rem;
    font-weight: bold;
    line-height: 1;
    margin-bottom: 1rem;
  }
  
  /* Testimonials */
  .testimonial-card {
    background: white;
    border-radius: 1rem;
    padding: 2rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  }
  
  [data-bs-theme="dark"] .testimonial-card {
    background: rgba(33, 37, 41, 0.8);
  }
  
  .quote-icon {
    font-size: 2rem;
    opacity: 0.2;
    margin-bottom: 1rem;
  }
  
  .testimonial-author img {
    object-fit: cover;
  }
  
  /* Divider */
  .divider {
    width: 80px;
    height: 4px;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 2px;
    margin: 1rem auto;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .hero-section {
      min-height: 70vh;
    }
    
    .hero-content {
      padding: 1.5rem;
    }
    
    h1.display-3 {
      font-size: 2.2rem;
    }
    
    .step {
      padding-left: 60px;
    }
    
    .step-number {
      width: 50px;
      height: 50px;
      font-size: 1.2rem;
    }
  }
</style>

<script>
  // Initialize AOS animation
  document.addEventListener('DOMContentLoaded', function() {
    AOS.init({
      duration: 800,
      easing: 'ease-in-out',
      once: true,
      offset: 100
    });
    
    // Add hover effect to cards
    const cards = document.querySelectorAll('.feature-card, .testimonial-card');
    cards.forEach(card => {
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-10px)';
        card.style.boxShadow = '0 15px 30px rgba(0, 0, 0, 0.1)';
      });
      
      card.addEventListener('mouseleave', () => {
        card.style.transform = '';
        card.style.boxShadow = '';
      });
    });
  });
</script>
{% endblock %}